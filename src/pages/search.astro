---
import PagefindSearchResults from "@components/organisms/PagefindSearchResults";
import SimpleHero from "@components/organisms/SimpleHero";
import BaseLayout from "@layouts/BaseLayout.astro";
import PagefindSearchField from "@components/molecules/PagefindSearchField";

export const prerender = false

const searchParams = new URL(Astro.request.url).searchParams;
const search = searchParams.get('search');
---

<BaseLayout title="Search" disableClientRouter>
  <SimpleHero title={`Searching for ${search ? `“${search}”...` : '... nothing?'}`} client:load transition:persist>
    <PagefindSearchField value={search} client:load style="width: 280px;" transition:persist transition:name="test" />
  </SimpleHero>

  <PagefindSearchResults client:load query={search} />
</BaseLayout>
